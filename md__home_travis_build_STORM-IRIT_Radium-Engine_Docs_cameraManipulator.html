<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Radium Engine: Camera manipulation in Radium</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">cfaf279965857219995329eb5963f4bb9bd4609e</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_travis_build_STORM-IRIT_Radium-Engine_Docs_cameraManipulator.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Camera manipulation in Radium </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Radium Engine provides some classes that allow to extend the way one might interact with a camera in an application.</p>
<p>The class <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> defines the general interface for camera manipulator. All manipulators have common properties that allow to switch from one manipulator to one other without disturbing the visual and interactive behavior of the application.</p>
<h2>Implementing a CameraManipulator</h2>
<p>In order to extend the set of <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> available in Radium or to develop a dedicated <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> for a <code><a class="el" href="classRa_1_1Gui_1_1Viewer.html" title="The Viewer is the main display class. ">Ra::Gui::Viewer</a></code>-based application, programmers are intended to do the following, demonstrated by the class <code>FlightCameraManipulator</code>.</p>
<ol type="1">
<li>Define the class that must inherits from <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> and, in order to receive interaction events, from <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html" title="KeyMappingManageable decorate, typical use as a CRTP : class MyClass : public KeyMappingManageable&lt;My...">Ra::Gui::KeyMappingManageable</a></code>. Note that a CameraManipulator is a <code>Q_OBJECT</code></li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;class RA_GUIBASE_API FlightCameraManipulator : public Ra::Gui::CameraManipulator,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                               public Ra::Gui::KeyMappingManageable&lt;FlightCameraManipulator&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;{</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    Q_OBJECT</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;...</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}; </div></div><!-- fragment --><ol type="1">
<li>Implement the constructors (default, copy). Note that it is also very important to implement a constructor that will take any <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> and will copy the base class before initializing the current manipulator.</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;FlightCameraManipulator::FlightCameraManipulator( const Ra::Gui::CameraManipulator&amp; other ) :</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    Ra::Gui::CameraManipulator( other ),</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    m_rotateAround( true ),</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    m_cameraRotateMode( false ),</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    m_cameraPanMode( false ),</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    m_cameraZoomMode( false ) {</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    m_flightSpeed = ( m_target - m_camera-&gt;getPosition() ).norm() / 10_ra;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    initializeFixedUpVector();</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;}</div></div><!-- fragment --><ol type="1">
<li>Implement the <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html" title="KeyMappingManageable decorate, typical use as a CRTP : class MyClass : public KeyMappingManageable&lt;My...">Ra::Gui::KeyMappingManageable</a></code> part of the class. This implies defining the method <code>void FlightCameraManipulator::configureKeyMapping_impl()</code> according to the semantic imposed by <code><a class="el" href="classRa_1_1Gui_1_1KeyMappingManageable.html" title="KeyMappingManageable decorate, typical use as a CRTP : class MyClass : public KeyMappingManageable&lt;My...">Ra::Gui::KeyMappingManageable</a></code>. It is recommended that, when implementing this keymapping initialisation callback, a default configuration is defined and saved to the xml keymapping configuration file if this later does not already contains a configuration. This will allow the users to edit and customize the proposed keymapping configuration.</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#define KMA_VALUE( XX ) Gui::KeyMappingManager::KeyMappingAction Gui::FlightCameraManipulator::XX;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;KeyMappingFlightManipulator</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;#undef KMA_VALUE</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    void FlightCameraManipulator::configureKeyMapping_impl() {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    m_keyMappingContext =</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        Ra::Gui::KeyMappingManager::getInstance()-&gt;getContext( &quot;FlightManipulatorContext&quot; );</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    if ( m_keyMappingContext.isInvalid() )</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        // The context is undefined, add a default configuration to the keymapping stystem </div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction(</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            &quot;FlightManipulatorContext&quot;, &quot;&quot;, &quot;&quot;, &quot;LeftButton&quot;, &quot;&quot;, &quot;FLIGHTMODECAMERA_ROTATE&quot; );</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction( &quot;FlightManipulatorContext&quot;,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                                          &quot;&quot;,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                                                          &quot;ShiftModifier&quot;,</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                                                          &quot;LeftButton&quot;,</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                                                          &quot;&quot;,</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                                                          &quot;FLIGHTMODECAMERA_PAN&quot; );</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction( &quot;FlightManipulatorContext&quot;,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                                          &quot;&quot;,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                                                          &quot;ControlModifier&quot;,</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                                          &quot;LeftButton&quot;,</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                                                          &quot;&quot;,</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                                                          &quot;FLIGHTMODECAMERA_ZOOM&quot; );</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        Ra::Gui::KeyMappingManager::getInstance()-&gt;addAction(</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            &quot;FlightManipulatorContext&quot;, &quot;Key_A&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;FLIGHTMODECAMERA_ROTATE_AROUND&quot; );</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        m_keyMappingContext =</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            Ra::Gui::KeyMappingManager::getInstance()-&gt;getContext( &quot;FlightManipulatorContext&quot; );</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    }</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;#define KMA_VALUE( XX ) \</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    XX = Ra::Gui::KeyMappingManager::getInstance()-&gt;getActionIndex( m_keyMappingContext, #XX );</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    KeyMappingFlightManipulator</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;#undef KMA_VALUE</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div></div><!-- fragment --><ol type="1">
<li>Implement the inherited abstract method according to the wanted behavior of the <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code></li>
</ol>
<h2>Using a CameraManipulator</h2>
<p>Using a <code><a class="el" href="classRa_1_1Gui_1_1CameraManipulator.html" title="The CameraManipulator class is the generic class for camera manipulators. ">Ra::Gui::CameraManipulator</a></code> in a <code><a class="el" href="classRa_1_1Gui_1_1Viewer.html" title="The Viewer is the main display class. ">Ra::Gui::Viewer</a></code>-based application is quite straightforward.</p>
<p>If one wants to set a first camera manipulator to a viewer </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;myViewer-&gt;setCameraManipulator(</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        new FlightCameraManipulator( width, height );</div></div><!-- fragment --><p>If one wants to change the manipulator while keeping the actual visual state </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;myViewer-&gt;setCameraManipulator(</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        new FlightCameraManipulator( *( m_viewer-&gt;getCameraManipulator() ) ) );</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Sep 27 2019 09:50:35 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
